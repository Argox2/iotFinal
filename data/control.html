<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Control de Juegos</title>
  <style>
    .button {
      width: 100px;
      height: 100px;
      font-size: 24px;
      margin: 10px;
    }
  </style>
</head>
<body>
  <h1>Control de Juegos</h1>
  <div>
    <button class="button" id="up">Arriba</button>
  </div>
  <div>
    <button class="button" id="left">Izquierda</button>
    <button class="button" id="right">Derecha</button>
  </div>
  <div>
    <button class="button" id="down">Abajo</button>
  </div>

  <script>
    const ws = new WebSocket(`ws://${window.location.hostname}/ws`);

    ws.onopen = () => {
      console.log('Conectado al servidor WebSocket');
    };

    ws.onmessage = (event) => {
      console.log(`Mensaje recibido: ${event.data}`);
    };

    const buttons = document.querySelectorAll('.button');
    let holdTimeout;

    buttons.forEach(button => {
      button.addEventListener('touchstart', (e) => {
        e.preventDefault();
        const direction = e.target.id.toUpperCase();
        holdTimeout = setTimeout(() => {
          sendDirection(direction, true);
        }, 500); // 500 ms para considerar una presiÃ³n prolongada
      });

      button.addEventListener('touchend', (e) => {
        e.preventDefault();
        clearTimeout(holdTimeout);
        const direction = e.target.id.toUpperCase();
        sendDirection(direction, false);
      });
    });

    function sendDirection(direction, isHolding) {
      const message = isHolding ? `HOLD_${direction}` : `CLICK_${direction}`;
      ws.send(message);
    }
  </script>
</body>
</html>
